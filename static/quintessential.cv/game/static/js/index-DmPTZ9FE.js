import{jsx as a,jsxs as m,Fragment as X}from"https://esm.sh/react@18.3.1/jsx-runtime";import te,{useEffect as E,createElement as Je,useState as j,useRef as F,StrictMode as Ze}from"https://esm.sh/react@18.3.1";import{createRoot as Qe}from"https://esm.sh/react-dom@18.3.1/client";import{P as ae}from"./puzzle-D7wVdZ9u.js";import{a as et,r as tt,u as st}from"./vendor-sPgyrCb3.js";import{initializeApp as rt}from"https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";import{getFirestore as nt,getDoc as ze,doc as ce,updateDoc as ot,setDoc as it,increment as at}from"https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore-lite.js";import"https://esm.sh/react-dom@18.3.1";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const pe=new URLSearchParams(typeof window>"u"?"":window.location.search.replace("?","")).get("f")==="",xe="quint-help",ct="quintessential-stats",lt="quint-settings",le="quintessential-save",ut=999,Z=pe?50:3e3,L={x:0,y:0},dt={winCount:0,moveCount:0,secondCount:0,streakCount:0,streakMax:0,lastWinStamp:null},se={x:0,y:0,backgroundColor:"#121212",immediate:!0,config:{precision:.9,friction:15,tension:120,clamp:!0}},ht=["#3a3a3c","#528a4c","#a39035"],ft=["#3a3a3c","#F07639","#84C0FA"],ue=({jumbledWords:t,solvedWords:e,activeIndex:s},r)=>{const n=Math.floor(r/5),o=t[n].split(""),i=e[n].split(""),c=o[r%5],l=i[r%5],d=i.filter((y,b)=>o[b]!==y),u=s===r,h=d.includes(c),v=l===c;let k=v?1:0;if(!v&&h){const b=o.slice(0,r%5).filter((w,x)=>w===c&&i[x]!==c).length,p=i.filter((w,x)=>w===c&&o[x]!==w).length;b<p&&(k=2)}const g=ht[k],f=ft[k];return{index:r,active:u,color:g,highContrastColor:f,state:k,correct:v}},mt=t=>t?window.getComputedStyle(t,null).getPropertyValue("background-color"):"transparent",pt=t=>t.toString().padStart(2,"0"),Re=(t,e=8)=>{const s=t.join("").split("");let r,n;do{const o=Ke(new Array(25).fill("").map((g,f)=>f)),i=he(o,2).slice(0,e),c=[...s];i.forEach(g=>{const f=c[g[0]];c[g[0]]=c[g[1]],c[g[1]]=f}),r=he(c,5).map(g=>g.join(""));const l=i.every(([g,f])=>c[g]!==c[f])&&i.every(([g,f])=>Math.floor(g/5)!==Math.floor(f/5)),d=t.some((g,f)=>g.split("").filter((y,b)=>y===r[f][b]).length>=3),u=t.flatMap((g,f)=>g.split("").map((y,b)=>y===r[f][b])),h=u.filter(Boolean).length,k=r.flatMap((g,f)=>g.split("").filter((y,b)=>!u[f*5+b]&&t[f].split("").some((p,w)=>!u[f*5+w]&&p===y&&t[f][b]!==y))).length;n=l&&!d&&h>=9&&h<=11&&k>=3&&k<=5}while(!n);return r},gt=(t,e)=>new Array(5).fill("").map((s,r)=>ue(t,e*5+r)),vt=(t,e,s)=>{const r=t.join("").split(""),n=r[e];return r[e]=r[s],r[s]=n,he(r.join("").split(""),5).map(o=>o.join(""))},yt=t=>{if(!t)return{x:0,y:0};const e=window.getComputedStyle(t),s=new DOMMatrixReadOnly(e.transform);return{x:s.m41,y:s.m42}},B=t=>({x:t?t.offsetLeft:-1,y:t?t.offsetTop:-1,color:t?mt(t):"transparent",index:t?+(t.dataset.index??"-1"):-1}),_e=(t,e,s)=>document.elementsFromPoint(t,e).find(r=>r.classList.contains("tile")&&r!==s),de=t=>`${Math.floor(t/60)}:${pt(Math.floor(t%60))}`,We=({date:t,puzzles:e,words:s})=>{if(!t||!e){const l=Ke(s??[]).slice(0,5),d=Re(l);return{puzzleNumber:"random",solvedWords:l,jumbledWords:d}}const r=Tt(t),n=e[r%e.length],o=n[0].split(","),i=n[1].split(","),c=n[2];return{puzzleNumber:r,solvedWords:o,jumbledWords:i,theme:c,date:+t}},$e=t=>{if(typeof window>"u")return t;const e=t.puzzleNumber==="random"?t.solvedWords.join(","):t.puzzleNumber,s=localStorage.getItem(`${le}-${e}`);if(s!=null&&s.startsWith("syrup")&&t.puzzleNumber===683)return localStorage.removeItem(`${le}-${e}`),location.reload(),t;if(s){const[r,n]=s.split(":"),[o,i]=n.split("-");t.jumbledWords=r.split(","),t.moveCount=+o,t.seconds=+i}return t},bt=({solvedWords:t,jumbledWords:e})=>e.every((s,r)=>s.split("").every((n,o)=>n===t[r][o])),Be=t=>{const e=new URLSearchParams(typeof window<"u"?window.location.search.replace("?",""):t);let s=new Date;const r=!1,n=e.get("p"),o=e.get("r")==="",i=e.get("k"),c=e.get("l");n&&(s=new Date(+new Date(n)+24*3600*1e3));const l=e.get("f")===""&&r,d=r&&e.get("s")||"",u=r&&e.get("j")||"";return{date:s,isRandom:o,solvedWords:d,jumbledWords:u,fastMode:l,statsOverride:i,storageOverride:c}},wt=t=>{const e=t.puzzleNumber==="random"?t.solvedWords.join(","):t.puzzleNumber;localStorage.setItem(`${le}-${e}`,`${t.jumbledWords.join(",")}:${t.moveCount}-${t.seconds}`)},xt={8:"Perfect!",9:"Amazing!",10:"Great!",11:"Good!",12:"Not Bad!"},_t=t=>xt[t]||"Done!",$=(t,e,s={})=>{window.gtag(t,e,s)},St=()=>{E(()=>{localStorage.setItem("quint-last-load",`${Date.now()}`),setInterval(()=>{const t=Number(localStorage.getItem("quint-last-load"));new Date().setHours(0,0,0,0)>t&&window.location.reload()},60*1e3)},[])},kt=(t,e=0)=>{if(typeof t.puzzleNumber=="number"){let s=!1;const r=localStorage.getItem(`quintessential-save-${t.puzzleNumber-1}`);r&&ae[(t.puzzleNumber-1)%ae.length][0]===r.split(":")[0]&&(s=!0),s||(e=0),e++}return e},Ct=(t=new Date)=>new Date(t.toUTCString().substr(0,25)),Ue=Ct(new Date("2022-02-07"));Ue.setHours(0,0,0,0);const Tt=t=>(t.setHours(0,0,0,0),Dt(t,Ue));function Ke(t){const e=[...t];for(let s=e.length-1;s>0;s--){const r=Math.floor(Math.random()*(s+1));[e[s],e[r]]=[e[r],e[s]]}return e}function he(t,e){if(e<=0)throw new Error("Size must be greater than 0");const s=[];for(let r=0;r<t.length;r+=e)s.push(t.slice(r,r+e));return s}function Dt(t,e){const r=typeof t=="number"?new Date(t):t,n=typeof e=="number"?new Date(e):e,o=r.getTime()-n.getTime();return Math.floor(o/864e5)}const It=({puzzle:t})=>{let e={moveCount:0,seconds:0,activeIndex:null,isComplete:!1,isLoadingNewPuzzle:!1,...t};return e=$e(e),e.isComplete=e.solvedWords.every((s,r)=>s===e.jumbledWords[r]),e},Nt=({word:t,index:e,wordState:s,bindGestures:r,springs:n})=>a("div",{className:"word",children:t.split("").map((o,i)=>{const c=e*5+i,{state:l,active:d}=s[i],u=l===1,h=l===1?"correct":l===2?"almost":"wrong";return Je(et.div,{...u||!r?{}:r(c),key:c,"data-index":c,"data-correct":l===1,className:`tile ${d?"active":""} ${h}`,style:{...n[c]||{},pointerEvents:u?"none":"auto",cursor:u?"auto":"pointer"}},o)})}),re="quintessential-9e9e0",Et="AIzaSyCnEqTdwqu5ZnPDW2lmmBifzLO1UWjplaI",Ot=rt({apiKey:Et,authDomain:`${re}.firebaseapp.com`,projectId:`${re}`,storageBucket:`${re}.firebasestorage.app`}),fe=nt(Ot),At=async(t,e)=>{e<8&&(e=8),e>12&&(e=13),e>=8&&t&&((await ze(ce(fe,"stats",`${t}`))).exists()?ot:it)(ce(fe,"stats",`${t}`),{[`${e}`]:at(1)})},Mt=async t=>{const e=await ze(ce(fe,"stats",`${t}`));return e.exists()?await e.data():{8:0,9:0,10:0,11:0,12:0}},Pt=({onClick:t,className:e="",fill:s="#454545"})=>a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",onClick:t,className:`${e} cursor-pointer`,children:a("path",{fill:s,d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm0 18.25c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25c.691 0 1.25.56 1.25 1.25s-.559 1.25-1.25 1.25zm1.961-5.928c-.904.975-.947 1.514-.935 2.178h-2.005c-.007-1.475.02-2.125 1.431-3.468.573-.544 1.025-.975.962-1.821-.058-.805-.73-1.226-1.365-1.226-.709 0-1.538.527-1.538 2.013h-2.01c0-2.4 1.409-3.95 3.59-3.95 1.036 0 1.942.339 2.55.955.57.578.865 1.372.854 2.298-.016 1.383-.857 2.291-1.534 3.021z"})}),Lt=({onClick:t,className:e="",fill:s="#454545"})=>a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",onClick:t,className:`${e} cursor-pointer`,children:a("path",{fill:s,d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm4.597 17.954l-4.591-4.55-4.555 4.596-1.405-1.405 4.547-4.592-4.593-4.552 1.405-1.405 4.588 4.543 4.545-4.589 1.416 1.403-4.546 4.587 4.592 4.548-1.403 1.416z"})}),jt=({onClick:t,className:e="",fill:s="#454545"})=>a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",onClick:t,className:`${e} cursor-pointer`,children:a("path",{fill:s,d:"M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"})}),zt=({onClick:t,className:e="",fill:s="#454545"})=>a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",onClick:t,className:`${e} cursor-pointer`,children:a("path",{fill:s,d:"M7 19h-6v-11h6v11zm8-18h-6v18h6v-18zm8 11h-6v7h6v-7zm1 9h-24v2h24v-2z"})}),ge=({id:t,open:e,onClose:s,title:r,children:n,className:o=""})=>{const[i,c]=j(e);return E(()=>{let l;return e?c(!0):l=setTimeout(()=>c(!1),100),()=>clearTimeout(l)},[e]),a("div",{onClick:s,className:`modal ${e?"open":""}`,children:a("div",{className:"modal-inner",onClick:l=>l.stopPropagation(),children:(e||i)&&m("div",{id:t,children:[m("header",{children:[a("div",{style:{width:25}}),a("h1",{children:r.toUpperCase()}),a(Lt,{className:"close-icon",onClick:s})]}),a("div",{className:`py-4 px-4 ${o}`,children:n})]})})})},R=({id:t,num:e,label:s})=>m("div",{className:"flex flex-col",children:[a("span",{id:`stat-${t}`,className:"text-2xl font-semibold",children:e}),a("span",{className:"text-xs mt-1 text-light-gray",children:s})]}),Rt=({open:t,onClose:e,isComplete:s,moveCount:r,seconds:n,puzzleNumber:o,stats:i,settings:c,puzzleTheme:l="random"})=>{const[d,u]=j(!1),[h,v]=j(null),k=o,g=de(n),f=de(i.secondCount/(i.winCount||1)),y=(i.moveCount/(i.winCount||1)).toFixed(2);let b=`https://quintessential.fun #${k} (${l}): ${r} moves`;c.timer&&(b+=` in ${g}`),E(()=>{t&&s&&!h&&l!=="random"&&!pe&&o&&!Number.isNaN(+o)&&Mt(+o).then(v)},[o,h,t,s,l]);const p=Object.values(h||{}).reduce((I,C)=>I+C,0)||1,w=I=>{let C=(h==null?void 0:h[I])||0;return I==="12"&&(C+=(h==null?void 0:h["13"])||0),Math.round(C/p*100)+"%"},x=()=>{u(!0),setTimeout(()=>u(!1),2500),navigator.clipboard.writeText(b),$("event","share")};return m(ge,{id:"stats-modal",open:t,onClose:e,title:"Statistics",className:"flex flex-col items-center text-center px-8",children:[a(ne,{heading:"All Time",children:m("div",{className:"flex justify-center space-x-8",children:[a(R,{id:"wins",num:i.winCount,label:"Wins"}),(!!i.streakMax||!!i.streakCount)&&a(R,{id:"streak-max",num:i.streakMax||i.streakCount,label:"Max Streak"}),a(R,{id:"avg-moves",num:y,label:"Avg. Moves"}),!!c.timer&&a(R,{id:"avg-time",num:f,label:"Avg. Time"})]})}),s?m(X,{children:[a(ne,{heading:"Last Game",children:m(X,{children:[m("div",{id:"last-game-stats",className:"flex space-x-8 mb-4",children:[a(R,{id:"puzzle-num",num:k||"random",label:"Puzzle #"}),a(R,{id:"moves",num:r,label:"Moves"}),c.timer&&a(R,{id:"time",num:g,label:"Time"}),i.streakCount&&a(R,{id:"streak",num:i.streakCount,label:"Streak"})]}),a("button",{onClick:x,children:d?"Copied!":"Share"})]})}),l==="random"?null:h?a(ne,{heading:"Global Move Count",children:a(Wt,{getPercent:w})}):"Loading stats..."]}):a(X,{})]})},ne=({heading:t,children:e})=>m("div",{className:"mb-4 w-full flex flex-col items-center",children:[a("h2",{children:t}),e]}),Wt=({getPercent:t})=>m("div",{className:"flex flex-col gap-y-1 w-full mt-2",children:[a(V,{className:"bg-green",moveCount:"8",percentage:t("8")}),a(V,{className:"bg-yellow",moveCount:"9",percentage:t("9")}),a(V,{className:"bg-[#c86c3a]",moveCount:"10",percentage:t("10")}),a(V,{className:"bg-[#8a5e4c]",moveCount:"11",percentage:t("11")}),a(V,{className:"bg-gray",moveCount:"12",percentage:t("12")})]}),V=({className:t,percentage:e,moveCount:s})=>m("div",{className:"flex items-center",children:[m("span",{className:"text-xs w-[70px] text-light-gray text-left",children:[s==="12"?"12+":s," moves"]}),a("div",{className:["flex items-center justify-start min-w-[28px] rounded-sm pl-1",t].join(" "),style:{width:e},children:a("span",{className:"text-xs font-bold",children:e})})]}),oe=({id:t,label:e,value:s,setValue:r})=>m("div",{children:[m("div",{className:"w-full flex justify-between items-center",children:[a("span",{children:e}),a("div",{className:"flex justify-center",children:m("div",{className:`relative w-12 h-6 transition duration-200 ease-linear rounded-full ${s?"bg-green":"bg-gray"}`,children:[a("label",{htmlFor:t,className:`absolute left-0 w-6 h-6 mb-2 transition duration-100 ease-linear transform bg-white border-2 rounded-full cursor-pointer ${s?"translate-x-full border-green":"translate-x-0 border-gray"}`}),a("input",{id:t,type:"checkbox",name:"toggle",className:"w-full h-full appearance-none focus:outline-none",onClick:()=>r(!s)})]})})]}),a("hr",{className:"text-gray w-full mt-4"})]}),$t=({settings:t,setSettings:e,open:s,onClose:r})=>m(ge,{id:"settings-modal",open:s,onClose:r,title:"Settings",className:"flex flex-col space-y-4",children:[a(oe,{id:"timer-switch",label:"Timer",value:t==null?void 0:t.timer,setValue:n=>{$("event","change_setting",{name:"timer",value:!!n}),e(o=>({...o,timer:n}))}}),a(oe,{id:"high-contrast-switch",label:"High Contrast",value:t==null?void 0:t.highContrast,setValue:n=>{$("event","change_setting",{name:"highContrast",value:!!n}),e(o=>({...o,highContrast:n}))}}),a(oe,{id:"hidden-theme-switch",label:"Hidden Theme",value:t==null?void 0:t.hiddenTheme,setValue:n=>{$("event","change_setting",{name:"hiddenTheme",value:!!n}),e(o=>({...o,hiddenTheme:n}))}}),m("div",{className:"flex flex-col space-y-2",children:[a("button",{id:"random-button",onClick:()=>{r(),window.location.search="r"},children:"Random Game"}),a("span",{className:"text-xs text-center text-light-gray",children:"Random games do not affect statistics"})]}),a("hr",{className:"text-gray w-full mt-4"}),a("button",{id:"clear-stats-button",onClick:()=>{Object.keys(localStorage).filter(n=>n.startsWith("quintessential")).forEach(n=>localStorage.removeItem(n)),window.location.reload()},children:"Clear stats"})]}),Bt=({open:t,onClose:e})=>m(ge,{id:"help-modal",open:t,onClose:e,title:"How to play",className:"text-left",children:[a("p",{children:"Try to get each of the 5 horizontal words correct in as few moves as possible."}),a("p",{children:"Click/tap/drag two letters to swap them. Puzzles can be solved in as few as 8 moves."}),a("video",{className:"mx-auto max-h-[8rem]",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:a("source",{src:"/help.mp4",type:"video/mp4"})}),m("p",{children:[a("span",{className:"font-bold text-green",children:"Green"})," is correct."]}),m("p",{children:[a("span",{className:"font-bold text-yellow",children:"Yellow"})," is in the correct word, but in the wrong position."]}),m("p",{children:[a("span",{className:"font-bold text-light-gray",children:"Gray"})," belongs in another word."]})]}),Ut=({message:t})=>{const[e,s]=j(!1);return E(()=>{t&&(s(!0),setTimeout(()=>s(!1),Z))},[t]),a("div",{className:`absolute inset-0 flex justify-center items-center pointer-events-none transition-opacity ${e?"":"opacity-0"}`,children:a("div",{className:"bg-white text-black px-5 py-2 rounded-full font-bold text-xl shadow-lg",children:t})})},Kt=({loading:t,theme:e,puzzleNumber:s,date:r,setModalState:n,hiddenTheme:o})=>{const[i,c]=j(o);return E(()=>{c(o)},[o]),m(X,{children:[m("header",{className:"mb-4",children:[a("div",{className:"w-12",children:a(Pt,{className:t?"":"help-icon",onClick:()=>n==null?void 0:n({help:!0})})}),a("a",{href:"/",children:a("h1",{className:"cursor-pointer",children:"QUINTESSENTIAL"})}),m("div",{className:"flex w-12",children:[a(zt,{className:t?"":"stats-icon",onClick:()=>n==null?void 0:n({stats:!0})}),a(jt,{className:t?"":"ml-2 settings-icon",onClick:()=>n==null?void 0:n({settings:!0})})]})]}),m("div",{id:"puzzle-meta",className:`flex ${e?"justify-between":"justify-center"} px-2 my-5 max-w-sm mx-auto`,children:[m("span",{children:[s&&s!=="random"&&m("span",{className:"font-bold",children:["#",s," "]}),a("span",{className:"font-light",children:r?Vt(r):null})]}),e&&m("span",{children:[a("span",{className:"font-bold",children:"Theme "}),a("span",{className:"font-light",onClick:()=>c(!1),style:{filter:i?"blur(6px)":""},children:e==null?void 0:e.toUpperCase()})]})]})]})};function Vt(t){const e=typeof t=="number"?new Date(t):t;return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)}const Gt=({timer:t,seconds:e,moveCount:s})=>m("div",{id:"move-count",className:`flex ${t?"justify-between":"justify-center"} px-2 mt-4 max-w-sm mx-auto`,children:[t&&a("span",{id:"timer",children:de(e)}),a("span",{id:"move-count",children:`${s} Move${s===1?"":"s"}`})]});var qt=tt();const Se=typeof window<"u";function ke(t,e){const[s,r]=j(()=>{if(!Se)return e;try{const o=window.localStorage.getItem(t);return o?JSON.parse(o):e}catch(o){return console.log(o),e}});return[s,o=>{try{const i=o instanceof Function?o(s):o;r(i),Se&&window.localStorage.setItem(t,JSON.stringify(i))}catch(i){console.log(i)}}]}function Ht(t,e,s){return Math.max(e,Math.min(t,s))}const T={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function Ce(t,e,s){return e===0||Math.abs(e)===1/0?Math.pow(t,s*5):t*e*s/(e+s*t)}function Te(t,e,s,r=.15){return r===0?Ht(t,e,s):t<e?-Ce(e-t,s-e,r)+e:t>s?+Ce(t-s,s-e,r)+s:t}function Yt(t,[e,s],[r,n]){const[[o,i],[c,l]]=t;return[Te(e,o,i,r),Te(s,c,l,n)]}function Ft(t,e){if(typeof t!="object"||t===null)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xt(t){var e=Ft(t,"string");return typeof e=="symbol"?e:String(e)}function D(t,e,s){return e=Xt(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function De(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,r)}return s}function _(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?De(Object(s),!0).forEach(function(r){D(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):De(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}const Ve={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Ie(t){return t?t[0].toUpperCase()+t.slice(1):""}const Jt=["enter","leave"];function Zt(t=!1,e){return t&&!Jt.includes(e)}function Qt(t,e="",s=!1){const r=Ve[t],n=r&&r[e]||e;return"on"+Ie(t)+Ie(n)+(Zt(s,n)?"Capture":"")}const es=["gotpointercapture","lostpointercapture"];function ts(t){let e=t.substring(2).toLowerCase();const s=!!~e.indexOf("passive");s&&(e=e.replace("passive",""));const r=es.includes(e)?"capturecapture":"capture",n=!!~e.indexOf(r);return n&&(e=e.replace("capture","")),{device:e,capture:n,passive:s}}function ss(t,e=""){const s=Ve[t],r=s&&s[e]||e;return t+r}function ee(t){return"touches"in t}function Ge(t){return ee(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function rs(t){return Array.from(t.touches).filter(e=>{var s,r;return e.target===t.currentTarget||((s=t.currentTarget)===null||s===void 0||(r=s.contains)===null||r===void 0?void 0:r.call(s,e.target))})}function ns(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function qe(t){return ee(t)?ns(t)[0]:t}function os(t){return rs(t).map(e=>e.identifier)}function ie(t){const e=qe(t);return ee(t)?e.identifier:e.pointerId}function Ne(t){const e=qe(t);return[e.clientX,e.clientY]}function is(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:s,altKey:r,metaKey:n,ctrlKey:o}=t;Object.assign(e,{shiftKey:s,altKey:r,metaKey:n,ctrlKey:o})}return e}function Q(t,...e){return typeof t=="function"?t(...e):t}function as(){}function cs(...t){return t.length===0?as:t.length===1?t[0]:function(){let e;for(const s of t)e=s.apply(this,arguments)||e;return e}}function Ee(t,e){return Object.assign({},e,t||{})}const ls=32;class us{constructor(e,s,r){this.ctrl=e,this.args=s,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:s,ingKey:r,args:n}=this;s[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=n,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const s=this.state,r=this.config;s._active||(this.reset(),this.computeInitial(),s._active=!0,s.target=e.target,s.currentTarget=e.currentTarget,s.lastOffset=r.from?Q(r.from,s):s.offset,s.offset=s.lastOffset,s.startTime=s.timeStamp=e.timeStamp)}computeValues(e){const s=this.state;s._values=e,s.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:s,config:r,shared:n}=this;s.args=this.args;let o=0;if(e&&(s.event=e,r.preventDefault&&e.cancelable&&s.event.preventDefault(),s.type=e.type,n.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,n.locked=!!document.pointerLockElement,Object.assign(n,is(e)),n.down=n.pressed=n.buttons%2===1||n.touches>0,o=e.timeStamp-s.timeStamp,s.timeStamp=e.timeStamp,s.elapsedTime=s.timeStamp-s.startTime),s._active){const C=s._delta.map(Math.abs);T.addTo(s._distance,C)}this.axisIntent&&this.axisIntent(e);const[i,c]=s._movement,[l,d]=r.threshold,{_step:u,values:h}=s;if(r.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(i)>=l&&h[0]),u[1]===!1&&(u[1]=Math.abs(c)>=d&&h[1])):(u[0]===!1&&(u[0]=Math.abs(i)>=l&&Math.sign(i)*l),u[1]===!1&&(u[1]=Math.abs(c)>=d&&Math.sign(c)*d)),s.intentional=u[0]!==!1||u[1]!==!1,!s.intentional)return;const v=[0,0];if(r.hasCustomTransform){const[C,O]=h;v[0]=u[0]!==!1?C-u[0]:0,v[1]=u[1]!==!1?O-u[1]:0}else v[0]=u[0]!==!1?i-u[0]:0,v[1]=u[1]!==!1?c-u[1]:0;this.restrictToAxis&&!s._blocked&&this.restrictToAxis(v);const k=s.offset,g=s._active&&!s._blocked||s.active;g&&(s.first=s._active&&!s.active,s.last=!s._active&&s.active,s.active=n[this.ingKey]=s._active,e&&(s.first&&("bounds"in r&&(s._bounds=Q(r.bounds,s)),this.setup&&this.setup()),s.movement=v,this.computeOffset()));const[f,y]=s.offset,[[b,p],[w,x]]=s._bounds;s.overflow=[f<b?-1:f>p?1:0,y<w?-1:y>x?1:0],s._movementBound[0]=s.overflow[0]?s._movementBound[0]===!1?s._movement[0]:s._movementBound[0]:!1,s._movementBound[1]=s.overflow[1]?s._movementBound[1]===!1?s._movement[1]:s._movementBound[1]:!1;const I=s._active?r.rubberband||[0,0]:[0,0];if(s.offset=Yt(s._bounds,s.offset,I),s.delta=T.sub(s.offset,k),this.computeMovement(),g&&(!s.last||o>ls)){s.delta=T.sub(s.offset,k);const C=s.delta.map(Math.abs);T.addTo(s.distance,C),s.direction=s.delta.map(Math.sign),s._direction=s._delta.map(Math.sign),!s.first&&o>0&&(s.velocity=[C[0]/o,C[1]/o],s.timeDelta=o)}}emit(){const e=this.state,s=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const n=this.handler(_(_(_({},s),e),{},{[this.aliasKey]:e.values}));n!==void 0&&(e.memo=n)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function ds([t,e],s){const r=Math.abs(t),n=Math.abs(e);if(r>n&&r>s)return"x";if(n>r&&n>s)return"y"}class hs extends us{constructor(...e){super(...e),D(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=T.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=T.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const s=this.state,r=this.config;if(!s.axis&&e){const n=typeof r.axisThreshold=="object"?r.axisThreshold[Ge(e)]:r.axisThreshold;s.axis=ds(s._movement,n)}s._blocked=(r.lockDirection||!!r.axis)&&!s.axis||!!r.axis&&r.axis!==s.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const fs=t=>t,Oe=.15,He={enabled(t=!0){return t},eventOptions(t,e,s){return _(_({},s.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[Oe,Oe];case!1:return[0,0];default:return T.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return T.toVector(t)},transform(t,e,s){const r=t||s.shared.transform;return this.hasCustomTransform=!!r,r||fs},threshold(t){return T.toVector(t,0)}},ms=0,G=_(_({},He),{},{axis(t,e,{axis:s}){if(this.lockDirection=s==="lock",!this.lockDirection)return s},axisThreshold(t=ms){return t},bounds(t={}){if(typeof t=="function")return o=>G.bounds(t(o));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:s=1/0,top:r=-1/0,bottom:n=1/0}=t;return[[e,s],[r,n]]}}),Ae={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class ps extends hs{constructor(...e){super(...e),D(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const s=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),n={left:s.left-r.left+e.offset[0],right:s.right-r.right+e.offset[0],top:s.top-r.top+e.offset[1],bottom:s.bottom-r.bottom+e.offset[1]};e._bounds=G.bounds(n)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const s=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(s.pointerButtons)?!s.pointerButtons.includes(e.buttons):s.pointerButtons!==-1&&s.pointerButtons!==e.buttons))return;const n=this.ctrl.setEventIds(e);s.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(n&&n.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=ie(e),r._pointerActive=!0,this.computeValues(Ne(e)),this.computeInitial(),s.preventScrollAxis&&Ge(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):s.delay>0?(this.setupDelayTrigger(e),s.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const s=this.state;s._active=!0,s._preventScroll=!0,s._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const s=this.state,r=this.config;if(!s._pointerActive)return;const n=ie(e);if(s._pointerId!==void 0&&n!==s._pointerId)return;const o=Ne(e);if(document.pointerLockElement===e.target?s._delta=[e.movementX,e.movementY]:(s._delta=T.sub(o,s._values),this.computeValues(o)),T.addTo(s._movement,s._delta),this.compute(e),s._delayed&&s.intentional){this.timeoutStore.remove("dragDelay"),s.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!s._preventScroll)if(s.axis)if(s.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){s._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const s=this.state,r=this.config;if(!s._active||!s._pointerActive)return;const n=ie(e);if(s._pointerId!==void 0&&n!==s._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[o,i]=s._distance;if(s.tap=o<=r.tapsThreshold&&i<=r.tapsThreshold,s.tap&&r.filterTaps)s._force=!0;else{const[c,l]=s._delta,[d,u]=s._movement,[h,v]=r.swipe.velocity,[k,g]=r.swipe.distance,f=r.swipe.duration;if(s.elapsedTime<f){const y=Math.abs(c/s.timeDelta),b=Math.abs(l/s.timeDelta);y>h&&Math.abs(d)>k&&(s.swipe[0]=Math.sign(c)),b>v&&Math.abs(u)>g&&(s.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const s=this.config,r=s.device;s.pointerLock&&e.currentTarget.requestPointerLock(),s.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,gs(e);const s=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",s),this.eventStore.add(this.sharedConfig.window,"touch","cancel",s),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const s=Ae[e.key];if(s){const r=this.state,n=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=s(this.config.keyboardDisplacement,n),r._keyboardActive=!0,T.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in Ae&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const s=this.config.device;e(s,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(s,"change",this.pointerMove.bind(this)),e(s,"end",this.pointerUp.bind(this)),e(s,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function gs(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const q=typeof window<"u"&&window.document&&window.document.createElement;function Ye(){return q&&"ontouchstart"in window}function vs(){return Ye()||q&&window.navigator.maxTouchPoints>1}function ys(){return q&&"onpointerdown"in window}function bs(){return q&&"exitPointerLock"in window.document}function ws(){try{return"constructor"in GestureEvent}catch{return!1}}const N={isBrowser:q,gesture:ws(),touch:Ye(),touchscreen:vs(),pointer:ys(),pointerLock:bs()},xs=250,_s=180,Ss=.5,ks=50,Cs=250,Ts=10,Me={mouse:0,touch:0,pen:8},Ds=_(_({},G),{},{device(t,e,{pointer:{touch:s=!1,lock:r=!1,mouse:n=!1}={}}){return this.pointerLock=r&&N.pointerLock,N.touch&&s?"touch":this.pointerLock?"mouse":N.pointer&&!n?"pointer":N.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:s}){if(this.preventScrollDelay=typeof s=="number"?s:s||s===void 0&&t?xs:void 0,!(!N.touchscreen||s===!1))return t||(s!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:s=!0,buttons:r=1,keys:n=!0}={}}){return this.pointerButtons=r,this.keys=n,!this.pointerLock&&this.device==="pointer"&&s},threshold(t,e,{filterTaps:s=!1,tapsThreshold:r=3,axis:n=void 0}){const o=T.toVector(t,s?r:n?1:0);return this.filterTaps=s,this.tapsThreshold=r,o},swipe({velocity:t=Ss,distance:e=ks,duration:s=Cs}={}){return{velocity:this.transform(T.toVector(t)),distance:this.transform(T.toVector(e)),duration:s}},delay(t=0){switch(t){case!0:return _s;case!1:return 0;default:return t}},axisThreshold(t){return t?_(_({},Me),t):Me},keyboardDisplacement(t=Ts){return t}});_(_({},He),{},{device(t,e,{shared:s,pointer:{touch:r=!1}={}}){if(s.target&&!N.touch&&N.gesture)return"gesture";if(N.touch&&r)return"touch";if(N.touchscreen){if(N.pointer)return"pointer";if(N.touch)return"touch"}},bounds(t,e,{scaleBounds:s={},angleBounds:r={}}){const n=i=>{const c=Ee(Q(s,i),{min:-1/0,max:1/0});return[c.min,c.max]},o=i=>{const c=Ee(Q(r,i),{min:-1/0,max:1/0});return[c.min,c.max]};return typeof s!="function"&&typeof r!="function"?[n(),o()]:i=>[n(i),o(i)]},threshold(t,e,s){return this.lockDirection=s.axis==="lock",T.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});_(_({},G),{},{mouseOnly:(t=!0)=>t});_(_({},G),{},{mouseOnly:(t=!0)=>t});const Fe=new Map,me=new Map;function Is(t){Fe.set(t.key,t.engine),me.set(t.key,t.resolver)}const Ns={key:"drag",engine:ps,resolver:Ds};function Es(t,e){if(t==null)return{};var s={},r=Object.keys(t),n,o;for(o=0;o<r.length;o++)n=r[o],!(e.indexOf(n)>=0)&&(s[n]=t[n]);return s}function Os(t,e){if(t==null)return{};var s=Es(t,e),r,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}const As={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=N.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},Ms=["target","eventOptions","window","enabled","transform"];function J(t={},e){const s={};for(const[r,n]of Object.entries(e))switch(typeof n){case"function":s[r]=n.call(s,t[r],r,t);break;case"object":s[r]=J(t[r],n);break;case"boolean":n&&(s[r]=t[r]);break}return s}function Ps(t,e,s={}){const r=t,{target:n,eventOptions:o,window:i,enabled:c,transform:l}=r,d=Os(r,Ms);if(s.shared=J({target:n,eventOptions:o,window:i,enabled:c,transform:l},As),e){const u=me.get(e);s[e]=J(_({shared:s.shared},d),u)}else for(const u in d){const h=me.get(u);h&&(s[u]=J(_({shared:s.shared},d[u]),h))}return s}class Xe{constructor(e,s){D(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=s}add(e,s,r,n,o){const i=this._listeners,c=ss(s,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},d=_(_({},l),o);e.addEventListener(c,n,d);const u=()=>{e.removeEventListener(c,n,d),i.delete(u)};return i.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class Ls{constructor(){D(this,"_timeouts",new Map)}add(e,s,r=140,...n){this.remove(e),this._timeouts.set(e,window.setTimeout(s,r,...n))}remove(e){const s=this._timeouts.get(e);s&&window.clearTimeout(s)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class js{constructor(e){D(this,"gestures",new Set),D(this,"_targetEventStore",new Xe(this)),D(this,"gestureEventStores",{}),D(this,"gestureTimeoutStores",{}),D(this,"handlers",{}),D(this,"config",{}),D(this,"pointerIds",new Set),D(this,"touchIds",new Set),D(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),zs(this,e)}setEventIds(e){if(ee(e))return this.touchIds=new Set(os(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,s){this.handlers=e,this.nativeHandlers=s}applyConfig(e,s){this.config=Ps(e,s,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const s=this.config.shared,r={};let n;if(!(s.target&&(n=s.target(),!n))){if(s.enabled){for(const i of this.gestures){const c=this.config[i],l=Pe(r,c.eventOptions,!!n);if(c.enabled){const d=Fe.get(i);new d(this,e,i).bind(l)}}const o=Pe(r,s.eventOptions,!!n);for(const i in this.nativeHandlers)o(i,"",c=>this.nativeHandlers[i](_(_({},this.state.shared),{},{event:c,args:e})),void 0,!0)}for(const o in r)r[o]=cs(...r[o]);if(!n)return r;for(const o in r){const{device:i,capture:c,passive:l}=ts(o);this._targetEventStore.add(n,i,"",r[o],{capture:c,passive:l})}}}}function U(t,e){t.gestures.add(e),t.gestureEventStores[e]=new Xe(t,e),t.gestureTimeoutStores[e]=new Ls}function zs(t,e){e.drag&&U(t,"drag"),e.wheel&&U(t,"wheel"),e.scroll&&U(t,"scroll"),e.move&&U(t,"move"),e.pinch&&U(t,"pinch"),e.hover&&U(t,"hover")}const Pe=(t,e,s)=>(r,n,o,i={},c=!1)=>{var l,d;const u=(l=i.capture)!==null&&l!==void 0?l:e.capture,h=(d=i.passive)!==null&&d!==void 0?d:e.passive;let v=c?r:Qt(r,n,u);s&&h&&(v+="Passive"),t[v]=t[v]||[],t[v].push(o)};function Rs(t,e={},s,r){const n=te.useMemo(()=>new js(t),[]);if(n.applyHandlers(t,r),n.applyConfig(e,s),te.useEffect(n.effect.bind(n)),te.useEffect(()=>n.clean.bind(n),[]),e.target===void 0)return n.bind.bind(n)}function Ws(t,e){return Is(Ns),Rs({drag:t},{},"drag")}const $s=({settings:t,state:e,onSelect:s,onSwap:r})=>{const[n,o]=st(25,()=>se),i=F(null),c=F(null),l=F(!1),d=F(!1),u=t.highContrast?"highContrastColor":"color";E(()=>{var y,b;const f=+(((b=(y=i.current)==null?void 0:y.dataset)==null?void 0:b.index)??"-1");o.start(p=>({backgroundColor:p===f?"#999":ue(e,p)[u]}))},[e,o,u,t.highContrast]);const h=f=>{if(!f)return;const y=+(f.dataset.index??"-1"),b=e.activeIndex;if(typeof b!="number")return i.current=null,c.current=f,s(y);if(b===y)return s(null);const p=B(f),w=B(c.current);l.current=!0,r(b,y),f.classList.remove("drag");const x=()=>{c.current=null,i.current=null,l.current=!1,o.set(L)};return o.start(I=>I===b?{immediate:se.immediate,from:{x:p.x-w.x,y:p.y-w.y,backgroundColor:p.color},to:L}:I===y?{immediate:se.immediate,from:{x:w.x-p.x,y:w.y-p.y,backgroundColor:w.color},to:L,onRest:x}:L)},v=f=>ue(e,f)[u];return{bindGestures:Ws(f=>{const{args:y,first:b,event:p,velocity:w,active:x,movement:I,tap:C}=f,[O]=y;if(l.current||e.isComplete)return;const A=p.target;if(!A||!A.className.includes("tile"))return;if(C)return h(A);b&&A.classList.add("drag");const P=B(A);let S=B(i.current);const[M,W]=I,{pageX:ve,pageY:ye}=p,H=()=>{l.current=!1,d.current=!1};if(x){if(Math.abs(w[0])+Math.abs(w[1])<.1&&!d.current){const z=_e(ve,ye,A);Math.abs(M)<40&&Math.abs(W)<40&&i.current?(d.current=!0,i.current=null):z&&S.index!==+(z.dataset.index??"-1")&&(d.current=!0,i.current=z,S=B(z))}return o.start(z=>z===S.index&&i.current?{x:P.x-S.x,y:P.y-S.y,onRest:H,backgroundColor:"#999"}:z===O?{x:M,y:W,backgroundColor:"#999",immediate:we=>we==="x"||we==="y"}:{...L,onRest:H,backgroundColor:v(z)})}if(A.classList.remove("drag"),i.current||(i.current=_e(ve,ye,A),S=B(i.current)),S.index===-1){o.start(K=>({...L,onRest:H,backgroundColor:v(K)}));return}r(P.index,S.index);const Y={x:P.x-S.x,y:P.y-S.y},be=yt(i.current);i.current=null,l.current=!0,o.start(K=>K===S.index?{from:{x:M+Y.x,y:W+Y.y,backgroundColor:P.color},to:L,onRest:H}:K===O?{from:{x:be.x-Y.x,y:be.y-Y.y,backgroundColor:S.color},to:L}:L)}),springs:n}},Bs=({initialState:t,onWin:e})=>{const[s,r]=j(t),[n,o]=j(""),i=new Date(Date.now()+s.seconds*1e3),c=!s.isComplete,l=qt.useStopwatch({autoStart:c,offsetTimestamp:i}),[d,u]=ke(lt,{}),[h,v]=ke(ct,dt);E(()=>{r(p=>(p=$e(p),p.isComplete=p.solvedWords.every((w,x)=>w===p.jumbledWords[x]),p))},[t]),E(()=>{l.reset(i,c)},[s.puzzleNumber]),E(()=>{$("event","level_start",{level_name:t.puzzleNumber}),c&&l.start()},[]),E(()=>{wt(s)},[s]),E(()=>{const p=l.seconds+l.minutes*60;p<ut&&r(w=>({...w,seconds:p}))},[l.seconds,l.minutes]);const k=p=>r(w=>({...w,activeIndex:p})),g=(p,w)=>r(x=>{const C=x.solvedWords,O=x.moveCount+1,A=vt(x.jumbledWords,p,w),P=bt({solvedWords:C,jumbledWords:A});return $("event","swap"),P&&($("event","level_end",{level_name:x.puzzleNumber,move_count:O,time:x.seconds}),l.pause(),v(S=>{const M=kt(x,h.streakCount);let W=S.streakMax||M;return M>W&&(W=M),setTimeout(()=>{o(_t(O)),M<2||typeof x.puzzleNumber!="number"?e({...x,moveCount:O}):setTimeout(()=>{o(`Streak x${M}`),e({...x,moveCount:O})},Z/2)},Z/4),x.theme?{...S,winCount:S.winCount+1,moveCount:S.moveCount+O,secondCount:S.secondCount+x.seconds,streakCount:M,lastWinStamp:Date.now(),streakMax:W,settings:d}:S})),{...x,activeIndex:null,moveCount:O,jumbledWords:A,isComplete:P}}),{bindGestures:f,springs:y}=$s({settings:d,state:s,onSwap:g,onSelect:k});return{state:s,stats:h,settings:d,bindGestures:f,springs:typeof window<"u"?y:[],setStats:v,setSettings:u,message:n,setMessage:o}},Le=typeof window<"u";let je=!1;const Us=({initialState:t})=>{var l;const[e,s]=j({help:Le?localStorage.getItem(xe)!=="1":!1,settings:!1,stats:!1}),r=d=>s(u=>({...u,...d})),n=d=>{setTimeout(()=>{if(r({stats:!0}),!je){const{moveCount:u,puzzleNumber:h}=d;!pe&&h&&!Number.isNaN(+h)&&At(+h,u),je=!0}},Z)},{state:o,...i}=Bs({initialState:t,onWin:n});St();const c=Be().fastMode?o.solvedWords.join(","):void 0;return E(()=>{Le&&localStorage.setItem(xe,"1")},[]),m("main",{children:[m("div",{id:"container",children:[a(Kt,{theme:o.theme,puzzleNumber:o.puzzleNumber,hiddenTheme:i.settings.hiddenTheme,date:o.date?new Date(o.date):void 0,setModalState:r}),m("div",{className:"words fade-in","data-solution":c,children:[o.jumbledWords.slice(0,5).map((d,u)=>a(Nt,{word:d,index:u,springs:i.springs,bindGestures:i.bindGestures,wordState:gt(o,u)},d)),a(Ut,{message:i.message})]}),a(Gt,{seconds:o.seconds,moveCount:o.moveCount,timer:(l=i.settings)==null?void 0:l.timer})]}),a(Bt,{open:e.help,onClose:()=>r({help:!1})}),a($t,{open:e.settings,settings:i.settings,setSettings:i.setSettings,onClose:()=>r({settings:!1})}),a(Rt,{open:e.stats,isComplete:o.isComplete,puzzleNumber:o.puzzleNumber,puzzleTheme:o.theme,moveCount:o.moveCount,seconds:o.seconds,stats:i.stats,settings:i.settings,onClose:()=>r({stats:!1})}),m("div",{className:"flex flex-col gap-2 items-center py-4 mb-12 md:mb-0 text-xs",children:[m("div",{className:"flex space-x-2 text-[#999999]",children:[a("a",{target:"_blank",href:"https://directive.software/games",children:"Try my other games"}),a("span",{children:"•"}),a("a",{target:"_blank",href:"https://ko-fi.com/directivesoftware",children:"Buy me a coffee"})]}),m("div",{className:"flex space-x-2 text-[#999999]",children:[a("a",{target:"_blank",href:"https://quintessential.fun/terms.html",children:"Terms of Service"}),a("span",{children:"•"}),a("a",{target:"_blank",href:"https://quintessential.fun/privacy.html",children:"Privacy Policy"})]})]})]})};function Ks(){return We({words:Vs})}const Vs=["alive","allow","alone","along","alter","among","anger","angle","angry","apart","apple","apply","argue","arise","aside","asset","avoid","award","aware","awful","badly","basic","basis","beach","begin","being","below","bench","bible","birth","blade","blame","blind","block","blood","board","brain","brand","bread","break","brief","bring","broad","brown","brush","build","bunch","buyer","cabin","cable","carry","catch","cause","chain","chair","chart","chase","cheap","check","cheek","chest","chief","child","civil","claim","class","clean","clear","climb","clock","close","cloud","coach","coast","color","couch","could","count","court","cover","crack","craft","crash","crazy","cream","crime","cross","crowd","cycle","daily","dance","death","delay","depth","dirty","doubt","dozen","draft","drama","dream","dress","drink","drive","eager","early","earth","eight","elect","elite","empty","enemy","enjoy","enter","entry","equal","error","essay","event","every","exact","exist","extra","faith","fault","favor","fence","fewer","fiber","field","fifty","fight","final","first","flame","flesh","float","floor","focus","force","forth","found","frame","fresh","front","fruit","fully","funny","ghost","giant","given","glass","glove","grade","grain","grand","grant","grass","grave","great","green","group","guard","guess","guest","guide","habit","happy","heart","heavy","hello","honey","honor","horse","hotel","house","human","humor","ideal","image","imply","index","inner","issue","joint","judge","juice","play","knife","knock","label","labor","large","later","laugh","layer","learn","least","leave","legal","lemon","level","light","limit","local","loose","lover","lower","lucky","lunch","major","maker","marry","match","maybe","mayor","media","metal","meter","might","minor","model","money","month","moral","motor","mount","mouse","mouth","movie","music","naked","nerve","never","newly","night","noise","north","novel","nurse","occur","ocean","offer","often","onion","order","other","ought","owner","paint","panel","paper","party","patch","pause","peace","phase","phone","photo","piano","piece","pilot","pitch","place","plane","plant","plate","point","porch","pound","power","press","price","pride","prime","print","prior","proof","proud","prove","quick","quiet","quite","quote","radio","raise","range","rapid","ratio","reach","react","ready","refer","relax","reply","right","river","rough","round","route","rural","salad","sales","sauce","scale","scene","scope","score","seize","sense","serve","seven","shade","shake","shall","shape","share","sharp","sheet","shelf","shell","shift","shine","shirt","shock","shoot","shore","short","shout","shrug","sight","since","skill","slave","sleep","slice","slide","small","smart","smell","smile","smoke","solar","solid","solve","sorry","sound","south","space","speak","speed","spend","split","sport","staff","stage","stair","stake","stand","stare","start","state","steal","steel","stick","still","stock","stone","store","storm","story","strip","study","stuff","style","sugar","super","swear","sweep","sweet","swing","table","taste","teach","terms","thank","their","theme","there","these","thick","thing","think","third","those","three","throw","tight","tired","title","today","tooth","topic","total","touch","tough","tower","trace","track","trade","trail","train","treat","trend","tribe","trick","troop","truck","truly","trust","truth","twice","uncle","under","union","until","upper","urban","usual","value","video","virus","visit","vital","voice","voter","waste","watch","water","weigh","wheel","where","which","while","white","whole","whose","woman","works","world","worry","worth","would","wound","write","wrong","yield","young","yours","youth"],Gs=()=>{const{date:t,statsOverride:e,isRandom:s,solvedWords:r,jumbledWords:n}=Be();if(e){const[c,l,d,u,h]=e.split("-").map(Number),v={winCount:c,moveCount:Math.round(u*c),secondCount:Math.round(h*c),streakCount:l,streakMax:d,lastWinStamp:Date.now()};localStorage.setItem("quintessential-stats",JSON.stringify(v)),window.history.pushState({},document.title,"/")}const o=s?Ks():We({date:t,puzzles:ae});r&&(o.puzzleNumber="random",o.theme=null,o.solvedWords=r.split(","),o.jumbledWords=n?n.split(","):Re(o.solvedWords));const i=It({puzzle:o});return a(Us,{initialState:i})};Qe(document.getElementById("root")).render(a(Ze,{children:a(Gs,{})}));
