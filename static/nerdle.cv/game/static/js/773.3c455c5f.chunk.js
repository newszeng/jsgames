"use strict";(self.webpackChunkNerdle=self.webpackChunkNerdle||[]).push([[773],{9773:(e,t,a)=>{a.d(t,{m:()=>u});var o=a(7313),s=a(4853),n=a(52),l=a(8577),r=a(319),i=a(2840),d=a(8426),c=a(4691),g=a(4431),m=a(6417);const u=e=>{let{isOpen:t,scoreText:a,handleClose:u,handleLogin:h}=e;const[p,f]=(0,o.useState)(""),[w,j]=(0,o.useState)(""),[A,b]=(0,o.useState)(""),[x,y]=(0,o.useState)(""),[v,S]=(0,o.useState)(""),[k,I]=(0,o.useState)(""),[N,T]=(0,o.useState)(),[q,C]=(0,o.useState)(!1),[D,M]=(0,o.useState)(!1),[O,P]=(0,o.useState)(!1),[z,E]=(0,o.useState)(!1);(0,o.useCallback)((()=>{alert("login start")}),[]),(0,o.useCallback)((()=>{T(null),I(""),alert("logout success")}),[]);(0,o.useEffect)((()=>{!0===t&&(console.log("setting newAccount to false"),localStorage.setItem("newAccount","false"),(0,g.VE)()&&window.addEventListener("message",(e=>{if(e.data.startsWith("finishSignIn")){const t=e.data.split("finishSignIn")[1],a=JSON.parse(t),o={provider:a.provider,googleId:a.id,fullname:a.name,email:a.email,source:"nerdle"};B(o,!1),PushService.requestPermission()}})))}),[t]);const B=(e,t)=>{if(!e.provider){if(0===p.length)return void alert("Please enter an email address");if(0===w.length)return void alert("Please enter a password");if(!p.includes("@"))return void alert("Please enter a valid email address");if(t){if(0===e.fullname.length)return void alert("Please enter a name");if(0===A.length)return void alert("Please confirm your password");if(w!==A)return void alert("Your passwords do not match");e.source="nerdle"}else delete e.fullname;delete e.confirmPassword}const o=t?"https://api.leaderboardle.com/user/create":"https://api.leaderboardle.com/login";console.log("payload",e),fetch(o,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((e=>e.json())).then((t=>{if(console.log(t),t.token)if(console.log("login success "+t.token),console.log("message "+t.message),localStorage.setItem("lbl_token",t.token),localStorage.setItem("userEmail",e.email),"User used a provider to sign in"!=t.message&&"User used a provider to sign in with email"!=t.message||(console.log("created new account"),localStorage.setItem("newAccount","true")),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.lblLogin&&window.webkit.messageHandlers.lblLogin.postMessage({message:t.token}),""!==a){fetch("https://api.leaderboardle.com/user/score/create",{method:"POST",headers:{Authorization:`Bearer ${t.token}`},body:a}).then((e=>e.json())).then((e=>{(0,r.i5)(),h()}))}else h();else D&&"Success"==t.item?(console.log("successful login"),"User is created"==t.message&&(console.log("created new account"),localStorage.setItem("newAccount","true")),B({email:p,password:w},!1)):t.message&&alert(t.message)}))},_=()=>{if(!O)return void P(!0);if(0===p.length)return void alert("Please enter an email address");if(!p.includes("@"))return void alert("Please enter a valid email address");const e={source:"nerdle",email:p};fetch("https://api.leaderboardle.com/league/forgot-password",{method:"POST",body:JSON.stringify(e)}).then((e=>{console.log(e.status),200===e.status?(console.log("Password reset email sent"),f(""),E(!0),P(!1)):alert("Error sending password reset email")}))},F=(0,i.Nq)({onSuccess:e=>{console.log(e),fetch("https://www.googleapis.com/oauth2/v3/userinfo",{method:"GET",headers:{Authorization:`Bearer ${e.access_token}`},redirect:"follow"}).then((e=>e.json())).then((e=>{console.log(e);const t=e.email,a=e.name,o=e.sub;console.log(t,a);B({provider:"google",googleId:o,fullname:a,email:t,source:"nerdle"},!1)}))},flow:"implicit"});return(0,m.jsx)(s.u.Root,{show:t,as:o.Fragment,children:(0,m.jsx)(n.V,{as:"div",className:"fixed z-10 inset-0 overflow-y-auto",onClose:u,children:(0,m.jsxs)("div",{className:"flex items-end justify-center pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,m.jsx)(s.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,m.jsx)(n.V.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,m.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,m.jsx)(s.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,m.jsxs)("div",{id:"infoText",className:" inline-block align-top bg-white dark:bg-gray-800  dark:text-[#D7DADC] rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-sm sm:w-full sm:p-6",children:[(0,m.jsx)("div",{className:"absolute left-4 top-4"}),(0,m.jsx)("div",{className:"absolute right-4 top-4",children:(0,m.jsx)(l.oOx,{"aria-label":"Close","aria-hidden":!1,role:"navigation",className:"h-6 w-6 cursor-pointer",onClick:()=>u()})}),(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:"text-center dark:text-white text-black",children:[(0,m.jsxs)(n.V.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900 dark:text-[#D7DADC] pl-8 pr-8",children:["Log in to ",(0,m.jsx)("span",{className:"nerdle-name",children:"nerdle"})]}),(0,m.jsxs)("div",{className:"mt-2",children:[(0,m.jsx)("p",{className:"my-2 mx-2 text-sm text-gray-500  dark:text-[#D7DADC] text-left",children:"Sync your stats across devices, share your scores."}),(0,m.jsx)("p",{}),(0,m.jsx)("p",{className:"mb-2",children:(0,m.jsx)(d.GoogleLoginButton,{text:"Continue with Google",onClick:()=>{(0,g.VE)()?(0,g.d_)("googleSignIn"):F()},style:{fontSize:17,minHeight:50}})}),(0,m.jsx)("p",{children:(0,m.jsx)("button",{type:"button",style:{display:"block",border:"0px",borderTopLeftRadius:"3px",borderTopRightRadius:"3px",borderBottomRightRadius:"3px",borderBottomLeftRadius:"3px",boxShadow:"rgba(0, 0, 0, 0.5) 0px 1px 2px",color:"rgb(255, 255, 255)",cursor:"pointer",fontSize:"17px",margin:"5px",width:"calc(100% - 10px)",overflow:"hidden",padding:"0px 10px",minHeight:"50px",backgroundColor:"rgb(167, 139, 250)"},onClick:()=>{(0,c.ZF)()},children:(0,m.jsxs)("div",{style:{alignItems:"center",display:"flex",height:"100%"},children:[(0,m.jsx)("div",{style:{display:"flex",justifyContent:"center",minWidth:"26px"},children:(0,m.jsx)("img",{src:"data:image/png;base64,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",alt:"Leaderboardle App",className:"h-8 w-8"})}),(0,m.jsx)("div",{style:{width:"10px"}}),(0,m.jsx)("div",{style:{textAlign:"left",width:"100%"},children:"Continue with LeaderboardLe"})]})})}),(0,m.jsx)("p",{className:"mt-4 text-gray-500 dark:text-[#D7DADC]",children:"OR"}),(0,m.jsx)("p",{className:"mt-2 mx-1",children:(0,m.jsx)("button",{className:"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm",onClick:()=>{C(!0),E(!1),P(!1)},children:"Use email"})}),(0,m.jsxs)("p",{className:"mt-2 text-sm text-gray-500 dark:text-[#D7DADC] text-left mx-2",children:["A Nerdle login also gives you access to"," ",(0,m.jsx)("a",{className:"underline cursor-pointer",href:"https://leaderboardle.com",target:"_new",children:"LeaderboardLe"})," ","where you can share scores from other -Le games and join leagues."]}),z&&(0,m.jsx)("p",{className:"text-center mt-2",children:"Thanks - please check your email"}),q&&!z&&(0,m.jsxs)("p",{className:"mt-2 text-sm text-gray-500  dark:text-[#D7DADC] text-left",children:[(0,m.jsx)("p",{className:"mt-2",children:"Email:"}),(0,m.jsx)("input",{id:"emailInput",className:"mt-1 w-[100%] border-sollid border-2 rounded-lg dark:text-[#000000]",type:"email",value:p,onChange:e=>{f(e.target.value)}}),!O&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{className:"mt-2",children:"Password:"}),(0,m.jsx)("input",{className:"mt-1 w-[100%] border-sollid border-2 rounded-lg dark:text-[#000000]",type:"password",value:w,onChange:e=>{console.log("changing password"),j(e.target.value)}})]}),D&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{className:"mt-2",children:"Confirm password:"}),(0,m.jsx)("input",{className:"mt-1 w-[100%] border-sollid border-2 rounded-lg dark:text-[#000000]",type:"password",value:A,onChange:e=>{b(e.target.value)}})]}),D&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{className:"mt-2",children:"Name:"}),(0,m.jsx)("input",{className:"mt-1 w-[100%] border-sollid border-2 rounded-lg dark:text-[#000000]",type:"text",value:x,onChange:e=>{y(e.target.value)}}),(0,m.jsx)("p",{className:"mt-2",children:"Date of birth:"}),(0,m.jsx)("input",{className:"mt-1 w-[100%] border-sollid border-2 rounded-lg dark:text-[#000000]",type:"date",value:v,onChange:e=>{S(e.target.value)}})]}),(0,m.jsxs)("p",{className:"mt-4",children:[!D&&!O&&(0,m.jsx)("button",{className:"inline-flex justify-center mb-2 mx-[1%] w-[48%] rounded-md border border-transparent shadow-sm py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm",onClick:()=>{B({email:p,password:w,fullname:x,confirmPassword:A},D)},children:"Log in"}),!O&&(0,m.jsx)("button",{className:"inline-flex justify-center mb-2 mx-[1%] w-[48%] rounded-md border border-transparent shadow-sm py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm",onClick:()=>{D?B({email:p,password:w,fullname:x,confirmPassword:A,dob:v},D):M(!0)},children:"Sign up"}),O&&(0,m.jsx)("p",{className:"text-center mb-2",children:"Click continue to send password reset instructions"}),O&&(0,m.jsx)("button",{className:"inline-flex justify-center mb-2 mx-[1%] w-[48%] rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm",onClick:()=>{_()},children:"Continue"}),(D||O)&&(0,m.jsx)("button",{className:"inline-flex justify-center mb-2 mx-[1%] w-[48%] rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm",onClick:()=>{M(!1),P(!1)},children:"Cancel"})]}),q&&!D&&!O&&(0,m.jsx)("p",{className:"text-right mt-2",children:(0,m.jsx)("span",{className:"underline cursor-pointer",id:"forgotPasswordButton",onClick:()=>_(),children:"Forgot password"})})]})]})]})})]})})]})})})}},319:(e,t,a)=>{a.d(t,{Gu:()=>m,Qy:()=>h,el:()=>A,nd:()=>r,Ss:()=>d,A_:()=>g,n7:()=>c,Ai:()=>p,T4:()=>u,Zd:()=>j,DH:()=>l,w$:()=>w,i5:()=>i,ex:()=>f});var o=a(9228);const s=[{minPoints:7,name:"7 days straight",smallImage:"https://nerdlegame.com/badges/straights/small/7.png",smallImageGray:"https://nerdlegame.com/badges/straights/small/7_gray.png",largeImage:"https://nerdlegame.com/badges/straights/large/[gameMode]/7.png",smallBrokenImage:"https://nerdlegame.com/badges/straights/small/7_x.png",next:30}];var n="https://api.leaderboardle.com";const l=(e,t)=>{const a=localStorage.getItem("lbl_token");if(console.log("save to cloud"),(0,o.Mg)("saving stats to cloud",{stats:e}),e&&a){const s={gameName:t,stats:e};fetch(n+"/user/stats/update",{method:"POST",headers:{Authorization:`Bearer ${a}`},body:JSON.stringify(s)}).then((e=>{201===e.status?e.json().then((e=>{console.log(e),(0,o.Mg)("stats saved to cloud",{json:e})})):(console.log(e),(0,o.Mg)("error saving stats to cloud",{res:e}))}))}},r=async e=>{(0,o.Mg)("getting cloud stats",{gameName:e});const t=localStorage.getItem("lbl_token");if(t){const a=`${n}/user/stats/get?gameName=${e}`,s=await fetch(a,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(200===s.status){const e=await s.json();return(0,o.Mg)("got cloud stats",{json:e}),{stats:e.stats,authorized:!0}}return s.status>=400&&s.status<500?(console.log("error with token?"),(0,o.Mg)("error getting cloud stats",{response:s}),localStorage.removeItem("lbl_token"),localStorage.removeItem("userEmail"),{stats:null,authorized:!1}):(console.log(s),{stats:null,authorized:!0})}return{stats:null,authorized:!0}},i=()=>{const e=localStorage.getItem("gameMode"),t=localStorage.getItem("lbl_token"),a=localStorage.getItem("lastSevenDaysScores");if(a&&t){const o=JSON.parse(a);Object.keys(o).forEach((a=>{const s=o[a].gameIndex,l=o[a].rows;fetch(n+"/user/score/create",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:(""===e?"":e+" ")+"nerdlegame "+s+" "+l+"/6\n\n"}).then((e=>{201===e.status?e.json().then((e=>{console.log(e)})):console.log(e)}))}))}},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=new Date,o=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+"T00:00:00.000Z",s=Date.parse(o);let l="all";if(!t){const e=localStorage.getItem("gameMode");l=""===e?"nerdlegame":"instant"===e?"instant%20nerdle":"micro"===e?"micro%20nerdle":e+"%20nerdlegame",l="midi"===e?"midi%20nerdle":l}const r=n+"/user/game-diary?game="+l+"&localDate="+s,i=localStorage.getItem("lbl_token");i?fetch(r,{method:"GET",headers:{Authorization:`Bearer ${i}`}}).then((t=>{200===t.status?t.json().then((t=>{e(t,!0)})):(console.log(t),t.status>=400&&t.status<500?(localStorage.removeItem("lbl_token"),localStorage.removeItem("userEmail"),e([],!1)):e([],!0))})):e([],!0)},c=function(e){let t=new Date;const a=`${new Intl.DateTimeFormat("en",{year:"numeric"}).format(t)}-${new Intl.DateTimeFormat("en",{month:"2-digit"}).format(t)}-${new Intl.DateTimeFormat("en",{day:"2-digit"}).format(t)}T00:00:00.000Z`,o=Date.parse(a),s=n+"/league/list?game=all&localDate="+o+"&date=This%20week",l=localStorage.getItem("lbl_token");l?fetch(s,{method:"GET",headers:{Authorization:`Bearer ${l}`}}).then((t=>{200===t.status?t.json().then((t=>{e(t)})):(console.log(t),e([]))})):e([])},g=function(e,t,a){const o={"":"nerdlegame",mini:"mini%20nerdlegame",instant:"instant%20nerdle",speed:"speed%20nerdlegame",micro:"micro%20nerdle",maxi:"maxi%20nerdlegame"}[t];let s=new Date;const l=`${new Intl.DateTimeFormat("en",{year:"numeric"}).format(s)}-${new Intl.DateTimeFormat("en",{month:"2-digit"}).format(s)}-${new Intl.DateTimeFormat("en",{day:"2-digit"}).format(s)}T00:00:00.000Z`,r=Date.parse(l),i=n+"/league/single?id="+e+"&game="+o+"&date=This%20week&localDate="+r,d=localStorage.getItem("lbl_token");d?fetch(i,{method:"GET",headers:{Authorization:`Bearer ${d}`}}).then((e=>{200===e.status?e.json().then((e=>{a(e)})):(console.log(e),a(null))})):a(null)},m=(e,t)=>{const a=n+"/league/create",o=localStorage.getItem("lbl_token");o?fetch(a,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{201===e.status?e.json().then((e=>{console.log("create league response: ",e),t(e)})):(console.log(e),t(null))})):t(null)},u=(e,t)=>{const a=n+"/league/join",o=localStorage.getItem("lbl_token"),s={inviteCode:e};o?fetch(a,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(s)}).then((e=>{const a=e.status;e.json().then((e=>{console.log("join league response: ",e),t(a,e)}))})):t(0,null)},h=(e,t)=>{const a=n+"/league/remove?id="+e,o=localStorage.getItem("lbl_token");o?fetch(a,{method:"DELETE",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}}).then((e=>{200===e.status?e.json().then((e=>{console.log("delete league response: ",e),t(e)})):(console.log(e),t(null))})):t(null)},p=e=>{const t=n+"/user/profile",a=localStorage.getItem("lbl_token")||"";a?fetch(t,{method:"GET",headers:{Authorization:`Bearer ${a}`}}).then((t=>{200===t.status?t.json().then((t=>{e(t)})):(console.log(t),e({}))})):e({})},f=(e,t)=>{const a=n+"/user/updateMarketingPreferences",o=localStorage.getItem("lbl_token");o?fetch(a,{method:"PUT",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{200===e.status?e.json().then((e=>{console.log("preferences: ",e),t(e)})):(console.log(e),t(null))})):t(null)},w=(e,t)=>{const a=n+"/league/send-email-verification/",o=localStorage.getItem("lbl_token");o&&fetch(a,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({email:e,source:"nerdle"})}).then((e=>{200===e.status?e.json().then((e=>{console.log("email verification: ",e),t(e)})):(console.log(e),t(null))}))},j=(e,t)=>{const a=n+"/account/remove?id="+e,o=localStorage.getItem("lbl_token");o?fetch(a,{method:"DELETE",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}}).then((e=>{200===e.status?e.json().then((e=>{console.log("remove account: ",e),t(e)})):(console.log(e),t(null))})):t(null)},A=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const a=localStorage.getItem("lastAchievementFetch")||"0";if((new Date).getTime()-parseInt(a)<6e4)return JSON.parse(localStorage.getItem("achievements")||"");var o=await async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const a=localStorage.getItem("lbl_token");if(a){const o=`${n}/user/achievements${e?"?updateProfile=true":""}${""!=t?"&challengeAwards="+t:""}`,s=await fetch(o,{method:"GET",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(200===s.status){const e=await s.json();localStorage.setItem("achievementsOld",localStorage.getItem("achievements")||""),localStorage.setItem("achievements",JSON.stringify(e));const t=(new Date).toISOString();return localStorage.setItem("lastAchievementsFetch",t),e}return s.status>=400&&s.status<500&&(console.log("error"),localStorage.removeItem("lbl_token"),localStorage.removeItem("userEmail")),null}return null}(e,t);if(!o){const e=(()=>{let e=parseInt(localStorage.getItem("currentStraight")||"0");const t=JSON.parse(localStorage.getItem("lastPlayed")||"{}"),a=localStorage.getItem("gameMode")||"",o=t[""==a?"classic":a]||"",n=new Date;n.setDate(n.getDate()-1);const l=n.toISOString().split("T")[0];if(s.sort(((e,t)=>t.minPoints-e.minPoints)),o>=l){let t=s.find((t=>e>=t.minPoints));return t&&(t.largeImage=t.largeImage.replace("[gameMode]",""==a?"classic":a)),t}{const t=s.find((t=>e>=t.minPoints));return t?{...t,smallImage:t.smallBrokenImage,broken:!0}:null}})();o=e?{data:{straightAwards:[{gameName:"classic",gameMode:"classic",award:e}],nerdleVerseAwards:[{gameName:"classic",gameMode:"classic",award:{name:"nerdleverse",smallImage:"",largeImage:""}}],offline:!0}}:{data:{straightAwards:[{gameName:"classic",gameMode:"classic",award:{name:"7 day straight",smallImage:"https://nerdlegame.com/badges/straights/small/7_gray.png",largeImage:"https://nerdlegame.com/badges/straights/large/7_gray.png",broken:!0}}],nerdleVerseAwards:[{gameName:"classic",gameMode:"classic",award:{name:"nerdleverse",smallImage:"",largeImage:""}}],offline:!0}}}if(o&&o.data){let e=localStorage.getItem("gameMode");""==e&&(e="classic");0===o.data.straightAwards.filter((t=>t.gameMode===e)).length&&o.data.straightAwards.push({gameName:e,gameMode:e,award:{name:"7 day straight",smallImage:"https://nerdlegame.com/badges/straights/small/7_gray.png",largeImage:"https://nerdlegame.com/badges/straights/large/7_gray.png",broken:!0}})}o.data.challengeAwards||(o.data.challengeAwards=[]);let l=!1;const r=JSON.parse(localStorage.getItem("challengeAwards")||"[]").find((e=>"Advent 2024 Challenge"===e.name));if(r){const e=r.achievedOn.split("T")[0],t=new Date,a=t.toISOString().split("T")[0];t.setDate(t.getDate()-1);const s=t.toISOString().split("T")[0];e!==a&&e!==s||(o.data.challengeAwards.push({award:r}),l=!0)}if(!l){const e=(new Date).toISOString().split("T")[0],t=e.split("-")[0],a=e.split("-")[1],s=e.split("-")[2];"2024"===t&&"12"===a&&parseInt(s)>=1&&parseInt(s)<=25&&o.data.challengeAwards.push({award:{name:"Advent 2024 Challenge",smallImage:"https://nerdlegame.com/badges/challenges/advent_gray.png",largeImage:"https://nerdlegame.com/badges/challenges/advent_gray.png",broken:!0}})}window._conv_q=window._conv_q||[];const i=JSON.parse(localStorage.getItem("lastPlayed")||"{}");let d=i.crossnerdle,c=void 0===d?1:Math.floor(((new Date).getTime()-new Date(d).getTime())/864e5);if(c<=1){let e=parseInt(localStorage.getItem("currentStraight_crossnerdle")||"0");e>=3&&_conv_q.push(["triggerConversion","100484746"]),e>=5&&_conv_q.push(["triggerConversion","100484747"]),e>=7&&_conv_q.push(["triggerConversion","100484748"])}if(d=i.classic,c=void 0===d?1:Math.floor(((new Date).getTime()-new Date(d).getTime())/864e5),c<=1){let e=parseInt(localStorage.getItem("currentStraight")||"0");e>=3&&_conv_q.push(["triggerConversion","100484750"]),e>=5&&_conv_q.push(["triggerConversion","100484751"]),e>=7&&_conv_q.push(["triggerConversion","100484752"])}return o}},4431:(e,t,a)=>{a.d(t,{EI:()=>s,Jv:()=>r,VE:()=>n,d_:()=>l});var o=a(4862);const s=()=>o.tq&&(!!window.navigator.standalone||!!window.matchMedia("(display-mode: standalone)").matches)||window.location.search.includes("?pwa")||window.navigator.userAgent.includes("Nerdle/1.0")||window.isMobileApp,n=()=>window.navigator.userAgent.includes("Nerdle/1.0")||window.isMobileApp,l=e=>{n()&&window.flutter_inappwebview.callHandler("flutterHandler",e)},r=()=>(console.log("platform: "+localStorage.getItem("platform")),localStorage.getItem("platform")||"web")},4691:(e,t,a)=>{a.d(t,{ZF:()=>l,UK:()=>n,or:()=>r});var o=a(319);async function s(e){const t=await async function(e){const t=await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e));return new Uint8Array(t)}(e);return async function(e){const t=Array.from(e,(e=>String.fromCharCode(e))).join("");return btoa(t)}(t)}const n=()=>{const e=localStorage.getItem("userEmail");if(e&&(async()=>{const t=await(async e=>{const t=(new TextEncoder).encode(e),a=await window.crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(a)).map((e=>e.toString(16).padStart(2,"0"))).join("")})(e);window.eh2=t;const a=await s(e);window.ehttd=a})(),"/callback"===window.location.pathname){const e=new URLSearchParams(window.location.search).get("authCode"),t="https://api.leaderboardle.com/oauth/getToken",a=window.location.host,s={grant_type:"authorization_code",code:e,redirect_uri:`${window.location.protocol}//${a}/callback`,client_id:"6583775bfec0fd774fb8fc93992281f0",client_secret:"cRfUjXn2r5u8x/A?D(G+KbPdSgVkYp3s"};fetch(t,{method:"POST",body:JSON.stringify(s)}).then((e=>{200===e.status?e.json().then((e=>{if(e.token){localStorage.setItem("lbl_token",e.token),localStorage.setItem("userEmail",e.email||"");const t=localStorage.getItem("statsState");t&&(0,o.DH)(t,localStorage.getItem("gameMode")||""),(0,o.i5)(),r(e.token)}})):alert("an error occurred - please try logging in again")}))}},l=()=>{const e=window.location.host,t=window.location.protocol,a="https://leaderboardle.com/oauth/authorize/6583775bfec0fd774fb8fc93992281f0/"+encodeURIComponent(t+"//"+e+"/callback");window.location.href=a},r=e=>{if(""==e)return;window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.lblLogin&&window.webkit.messageHandlers.lblLogin.postMessage({message:e});const t={lblToken:e,target:window.location.protocol+"//"+window.location.host},a=btoa(JSON.stringify(t)),o=window.location.hostname.split(".")[0];"localhost"!=o&&"dev"!=o&&"nerdlegame"!=o?window.location.href=window.location.hostname.includes("localhost")?"http://localhost:3000/storeLbl.html?v=2&set="+a:(window.location.hostname.includes("dev.")?"https://dev.":"https://")+"nerdlegame.com/storeLbl.html?set="+a:(window.history.replaceState({},document.title,"/"),window.location.reload())}},9228:(e,t,a)=>{a.d(t,{Hk:()=>s,Mg:()=>n});var o=a(264);const s=()=>{if(localStorage.getItem("mplog")){const e=new Date(localStorage.getItem("mplog")||"").getTime();(new Date).getTime()-e<864e5?(o.Z.init("7d7edc7d12220fa479a6af9903923057",{debug:!0,track_pageview:!0,persistence:"localStorage"}),localStorage.getItem("email")&&(o.Z.identify(localStorage.getItem("email")||""),o.Z.people.set({email:localStorage.getItem("email")})),localStorage.getItem("userEmail")&&(o.Z.identify(localStorage.getItem("userEmail")||""),o.Z.people.set({email:localStorage.getItem("userEmail")}))):console.log("log time expired")}},n=(e,t)=>{if(localStorage.getItem("mplog")){const a=new Date(localStorage.getItem("mplog")||"").getTime();(new Date).getTime()-a<864e5&&o.Z.track(e,t)}}}}]);